(function(e,m){typeof exports=="object"&&typeof module<"u"?module.exports=m(require("vue"),require("vue-router")):typeof define=="function"&&define.amd?define(["vue","vue-router"],m):(e=typeof globalThis<"u"?globalThis:e||self,e.vueTabsPlus=m(e.Vue,e.vueRouter))})(this,function(e,m){"use strict";const le="",H=["title","onClick","onContextmenu"],U={class:"text-box"},F=["onClick"],q=e.createStaticVNode('<div class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2"><path stroke-dasharray="32" stroke-dashoffset="32" d="M12 6C15.3137 6 18 8.68629 18 12C18 15.3137 15.3137 18 12 18C8.68629 18 6 15.3137 6 12V9.5"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.6s" values="32;0"></animate></path><path stroke-dasharray="6" stroke-dashoffset="6" d="M6 9L3 12M6 9L9 12"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.6s" dur="0.2s" values="6;0"></animate></path></g></svg></div>',1),O=e.createStaticVNode('<div class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2"><path d="M5 5L12 5L19 5"><animate fill="freeze" attributeName="d" dur="0.4s" values="M5 5L12 5L19 5;M5 5L12 12L19 5"></animate></path><path d="M5 12H19"><animate fill="freeze" attributeName="d" dur="0.4s" values="M5 12H19;M12 12H12"></animate></path><path d="M5 19L12 19L19 19"><animate fill="freeze" attributeName="d" dur="0.4s" values="M5 19L12 19L19 19;M5 19L12 12L19 19"></animate></path></g></svg></div>',1),J=e.createStaticVNode('<div class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path stroke-dasharray="20" stroke-dashoffset="20" d="M12 3V21"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.3s" values="20;0"></animate></path><path stroke-dasharray="8" stroke-dashoffset="8" d="M22 12H15.5M2 12H8.5"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.4s" dur="0.2s" values="8;0"></animate></path><path stroke-dasharray="6" stroke-dashoffset="6" d="M15 12L18 15M9 12L6 15M15 12L18 9M9 12L6 9"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.6s" dur="0.2s" values="6;0"></animate></path></g></svg></div>',1),Y=e.createElementVNode("div",{class:"icon"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24"},[e.createElementVNode("path",{fill:"currentColor",d:"M11.92 19.92L4 12l7.92-7.92l1.41 1.42l-5.5 5.5H22v2H7.83l5.51 5.5l-1.42 1.42M4 12V2H2v20h2V12Z"})])],-1),Z=e.createElementVNode("div",{class:"icon"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24"},[e.createElementVNode("path",{fill:"currentColor",d:"M12.08 4.08L20 12l-7.92 7.92l-1.41-1.42l5.5-5.5H2v-2h14.17l-5.5-5.5l1.41-1.42M20 12v10h2V2h-2v10Z"})])],-1),G=[{__name:"index",props:{type:{type:String,default:"button"},i18n:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},leftIcon:{type:Object,default:()=>({icon:"\uFF1C"})},rightIcon:{type:Object,default:()=>({icon:"\uFF1E"})},closeIcon:{type:Object,default:()=>({icon:"x"})},stepPercentage:{type:Number,default:10}},emits:["reloadPage"],setup(l,{expose:E,emit:K}){const k=l,N=m.useRoute(),y=m.useRouter(),Q=(t,o)=>{let c=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector;for(;t&&!c.call(t,o);)t=t.parentElement;return t},j=(t,o)=>{let c=[],n=I=>{I.forEach(f=>{_(f,o)&&c.push(f),f.childNodes&&f.childNodes.length>0&&n(f.childNodes)})};return n(t.childNodes),c},_=(t,o)=>t.classList?t.classList.contains(o):new RegExp("\\s"+o+"\\s").test(" "+t.className+" "),p=t=>{let o=t instanceof Array?[]:{};for(let c in t)o[c]=typeof t[c]=="object"?p(t[c]):t[c];return o},ee=t=>window.btoa(encodeURIComponent(JSON.stringify(t))),te=t=>JSON.parse(decodeURIComponent(window.atob(t))),a=e.ref([]);e.watch(()=>a.value.length,()=>{sessionStorage.setItem("_VUETABSARR_",ee(a.value))}),e.watch(N,()=>{X(N)});const d=e.ref({}),C=e.ref(!1),u=e.ref(!1),x=e.ref(!1),L=e.ref(!1);let B=0,b=0,V=0,M=0,P=0;const r=e.ref(null),h=()=>{i.value=!1;const t=j(r.value,"item");a.value.forEach((o,c)=>{c===0?(o.btnMoveX=0,o.chromeMoveX=0):(o.btnMoveX=a.value[c-1].btnMoveX+t[c].clientWidth+12,o.chromeMoveX=a.value[c-1].chromeMoveX+t[c].clientWidth)}),V=r.value.clientWidth-20,B=0,b=0,t.forEach((o,c)=>{b+=o.clientWidth,B+=o.clientWidth+2,c!==0&&(B+=10)}),v()},v=()=>{C.value=V<(k.type==="button"?B:b),M=(k.type==="button"?B:b)-V,P=M/k.stepPercentage,C.value?(r.value.scrollLeft=a.value.filter(t=>t.path===d.value.path)[0][k.type==="button"?"btnMoveX":"chromeMoveX"],T(),u.value||r.value.addEventListener("wheel",S),u.value=!0):(u.value&&r.value.removeEventListener("wheel",S),u.value=!1)};e.watch(()=>k.type,()=>v());const T=()=>{x.value=r.value.scrollLeft===0,L.value=r.value.scrollLeft===M},g=(t=!0)=>{r.value.scrollLeft=r.value.scrollLeft+(t?P:-P),T()},S=t=>{i.value=!1,t.wheelDelta?t.wheelDelta>0?g(!1):t.wheelDelta<0&&g():t.detail&&(t.wheelDelta<0?g(!1):t.wheelDelta>0&&g())},i=e.ref(!1);e.watch(i,()=>{i.value?document.body.addEventListener("click",z):document.body.removeEventListener("click",z)});const R=e.ref(0),W=e.ref(0),s=e.ref({data:{},index:0}),oe=(t,o)=>{s.value.data=p(t),s.value.index=o,R.value=event.pageX+120>document.body.clientWidth?document.body.clientWidth-120:event.pageX,W.value=event.pageY,i.value=!0},z=()=>{Q(event.target,".tabs-pop")===null&&(i.value=!1)},w=t=>{switch(t){case 1:i.value=!1,K("reloadPage");break;case 2:i.value=!1,$(s.value.data,s.value.index);break;case 3:a.value=[p(s.value.data)],i.value=!1,a.value.findIndex(o=>o.path===d.value.path)===-1&&y.push(s.value.data.path);break;case 4:a.value=p(a.value.slice(s.value.index)),a.value.findIndex(o=>o.path===d.value.path)===-1?(i.value=!1,y.push(s.value.data.path)):e.nextTick(()=>{h()});break;case 5:a.value=p(a.value.slice(0,s.value.index+1)),a.value.findIndex(o=>o.path===d.value.path)===-1?(i.value=!1,y.push(s.value.data.path)):e.nextTick(()=>{h()});break}},X=t=>{const o={label:t.meta.title,supLabel:t.query.tabsSupTit||"",name:t.name,path:t.fullPath,icon:t.meta.icon};a.value.findIndex(c=>k.multiple?c.path===o.path:c.name===o.name)===-1?(a.value.push(o),A(o)):A(o,!1)},$=(t,o)=>{a.value.splice(o,1),e.nextTick(()=>{t.path===d.value.path?y.push(a.value[o===a.value.length?o-1:o].path):h()})},A=(t,o=!0)=>{d.value=p(t),o?e.nextTick(()=>{h()}):v()};return sessionStorage.getItem("_VUETABSARR_")&&(a.value=te(sessionStorage.getItem("_VUETABSARR_"))),X(N),e.onMounted(()=>{h(),window.addEventListener("resize",h)}),e.onBeforeUnmount(()=>{window.removeEventListener("resize",h),document.body.removeEventListener("click",z),sessionStorage.removeItem("_VUETABSARR_"),u.value&&r.value.removeEventListener("wheel",S)}),E({dealSize:h}),(t,o)=>{const c=e.resolveComponent("el-icon");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vue-tabs-plus",l.type!=="button"?"chrome-tab":""])},[C.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["go-left",x.value?"is-dis":""]),onClick:o[0]||(o[0]=n=>x.value?null:g(!1))},[l.leftIcon&&(l.leftIcon.icon||l.leftIcon.type)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[l.leftIcon.type==="custom"?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(l.leftIcon.icon),e.normalizeProps(e.mergeProps({key:0},l.leftIcon.attrs)),null,16)):l.leftIcon.type==="el"?(e.openBlock(),e.createBlock(c,e.normalizeProps(e.mergeProps({key:1},l.leftIcon.attrs)),{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(l.leftIcon.icon)))]),_:1},16)):l.leftIcon.type==="iconfont"?(e.openBlock(),e.createElementBlock("i",e.mergeProps({key:2,class:["icon iconfont","icon-"+l.leftIcon.icon]},l.leftIcon.attrs),null,16)):(e.openBlock(),e.createElementBlock("i",e.mergeProps({key:3,class:l.leftIcon.type},l.leftIcon.attrs),e.toDisplayString(l.leftIcon.icon),17))],64)):e.createCommentVNode("",!0)],2)):e.createCommentVNode("",!0),e.createElementVNode("div",{ref_key:"itemBox",ref:r,class:"item-box"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value,(n,I)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["item",n.path===d.value.path?"active":""]),title:(l.i18n?t.$t(n.label):n.label)+n.supLabel,key:I,onClick:f=>n.path===d.value.path?null:e.unref(y).push(n.path),onContextmenu:e.withModifiers(f=>oe(n,I),["prevent"])},[n.icon&&(n.icon.icon||n.icon.type)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[n.icon.type==="custom"?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.icon.icon),e.mergeProps({key:0,class:"menu-icon"},n.icon.attrs),null,16)):n.icon.type==="el"?(e.openBlock(),e.createBlock(c,e.mergeProps({key:1,class:"menu-icon"},n.icon.attrs),{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.icon.icon)))]),_:2},1040)):n.icon.type==="iconfont"?(e.openBlock(),e.createElementBlock("i",e.mergeProps({key:2,class:["menu-icon icon iconfont","icon-"+n.icon.icon]},n.icon.attrs),null,16)):(e.openBlock(),e.createElementBlock("i",e.mergeProps({key:3,class:["menu-icon",n.icon.type]},n.icon.attrs),e.toDisplayString(n.icon.icon),17))],64)):e.createCommentVNode("",!0),e.createElementVNode("div",U,e.toDisplayString(l.i18n?t.$t(n.label):n.label)+e.toDisplayString(n.supLabel),1),a.value.length>1?(e.openBlock(),e.createElementBlock("div",{key:1,class:"icon-box",onClick:e.withModifiers(f=>$(n,I),["stop"])},[l.closeIcon&&(l.closeIcon.icon||l.closeIcon.type)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[l.closeIcon.type==="custom"?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(l.closeIcon.icon),e.normalizeProps(e.mergeProps({key:0},l.closeIcon.attrs)),null,16)):l.closeIcon.type==="el"?(e.openBlock(),e.createBlock(c,e.normalizeProps(e.mergeProps({key:1},l.closeIcon.attrs)),{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(l.closeIcon.icon)))]),_:1},16)):l.closeIcon.type==="iconfont"?(e.openBlock(),e.createElementBlock("i",e.mergeProps({key:2,class:["icon iconfont","icon-"+l.closeIcon.icon]},l.closeIcon.attrs),null,16)):(e.openBlock(),e.createElementBlock("i",e.mergeProps({key:3,class:l.closeIcon.type},l.closeIcon.attrs),e.toDisplayString(l.closeIcon.icon),17))],64)):e.createCommentVNode("",!0)],8,F)):e.createCommentVNode("",!0)],42,H))),128)),i.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:"tabs-pop",style:e.normalizeStyle({left:R.value+"px",top:W.value+"px"})},[e.createElementVNode("div",{class:e.normalizeClass(["tabs-pop-item",s.value.data.path===d.value.path?"":"dis"]),onClick:o[1]||(o[1]=n=>s.value.data.path===d.value.path?w(1):null)},[q,e.createTextVNode(" \u91CD\u65B0\u52A0\u8F7D ")],2),e.createElementVNode("div",{class:e.normalizeClass(["tabs-pop-item",a.value.length===1?"dis":""]),onClick:o[2]||(o[2]=n=>w(2))},[O,e.createTextVNode(" \u5173\u95ED\u5F53\u524D ")],2),e.createElementVNode("div",{class:e.normalizeClass(["tabs-pop-item",a.value.length===1?"dis":""]),onClick:o[3]||(o[3]=n=>w(3))},[J,e.createTextVNode(" \u5173\u95ED\u5176\u4ED6 ")],2),e.createElementVNode("div",{class:e.normalizeClass(["tabs-pop-item",s.value.index===0?"dis":""]),onClick:o[4]||(o[4]=n=>w(4))},[Y,e.createTextVNode(" \u5173\u95ED\u5DE6\u4FA7 ")],2),e.createElementVNode("div",{class:e.normalizeClass(["tabs-pop-item",s.value.index===a.value.length-1?"dis":""]),onClick:o[5]||(o[5]=n=>w(5))},[Z,e.createTextVNode(" \u5173\u95ED\u53F3\u4FA7 ")],2)],4)):e.createCommentVNode("",!0)],512),C.value?(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass(["go-right",L.value?"is-dis":""]),onClick:o[6]||(o[6]=n=>L.value?null:g())},[l.rightIcon&&(l.rightIcon.icon||l.rightIcon.type)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[l.rightIcon.type==="custom"?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(l.rightIcon.icon),e.normalizeProps(e.mergeProps({key:0},l.rightIcon.attrs)),null,16)):l.rightIcon.type==="el"?(e.openBlock(),e.createBlock(c,e.normalizeProps(e.mergeProps({key:1},l.rightIcon.attrs)),{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(l.rightIcon.icon)))]),_:1},16)):l.rightIcon.type==="iconfont"?(e.openBlock(),e.createElementBlock("i",e.mergeProps({key:2,class:["icon iconfont","icon-"+l.rightIcon.icon]},l.rightIcon.attrs),null,16)):(e.openBlock(),e.createElementBlock("i",e.mergeProps({key:3,class:l.rightIcon.type},l.rightIcon.attrs),e.toDisplayString(l.rightIcon.icon),17))],64)):e.createCommentVNode("",!0)],2)):e.createCommentVNode("",!0)],2)}}}],D={install(l){G.forEach(E=>{l.component("vueTabsPlus",E)})}};return typeof window<"u"&&window.Vue&&window.Vue.use(D),D});
