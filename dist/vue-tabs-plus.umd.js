(function(e,m){typeof exports=="object"&&typeof module<"u"?module.exports=m(require("vue"),require("vue-router")):typeof define=="function"&&define.amd?define(["vue","vue-router"],m):(e=typeof globalThis<"u"?globalThis:e||self,e.vueTabsPlus=m(e.Vue,e.vueRouter))})(this,function(e,m){"use strict";const ne="",U=["title","onClick","onContextmenu"],F={class:"text-box"},q=["onClick"],O=e.createStaticVNode('<div class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2"><path stroke-dasharray="32" stroke-dashoffset="32" d="M12 6C15.3137 6 18 8.68629 18 12C18 15.3137 15.3137 18 12 18C8.68629 18 6 15.3137 6 12V9.5"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.6s" values="32;0"></animate></path><path stroke-dasharray="6" stroke-dashoffset="6" d="M6 9L3 12M6 9L9 12"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.6s" dur="0.2s" values="6;0"></animate></path></g></svg></div>',1),J=e.createStaticVNode('<div class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2"><path d="M5 5L12 5L19 5"><animate fill="freeze" attributeName="d" dur="0.4s" values="M5 5L12 5L19 5;M5 5L12 12L19 5"></animate></path><path d="M5 12H19"><animate fill="freeze" attributeName="d" dur="0.4s" values="M5 12H19;M12 12H12"></animate></path><path d="M5 19L12 19L19 19"><animate fill="freeze" attributeName="d" dur="0.4s" values="M5 19L12 19L19 19;M5 19L12 12L19 19"></animate></path></g></svg></div>',1),Y=e.createStaticVNode('<div class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path stroke-dasharray="20" stroke-dashoffset="20" d="M12 3V21"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.3s" values="20;0"></animate></path><path stroke-dasharray="8" stroke-dashoffset="8" d="M22 12H15.5M2 12H8.5"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.4s" dur="0.2s" values="8;0"></animate></path><path stroke-dasharray="6" stroke-dashoffset="6" d="M15 12L18 15M9 12L6 15M15 12L18 9M9 12L6 9"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.6s" dur="0.2s" values="6;0"></animate></path></g></svg></div>',1),Z=e.createElementVNode("div",{class:"icon"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24"},[e.createElementVNode("path",{fill:"currentColor",d:"M11.92 19.92L4 12l7.92-7.92l1.41 1.42l-5.5 5.5H22v2H7.83l5.51 5.5l-1.42 1.42M4 12V2H2v20h2V12Z"})])],-1),G=e.createElementVNode("div",{class:"icon"},[e.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24"},[e.createElementVNode("path",{fill:"currentColor",d:"M12.08 4.08L20 12l-7.92 7.92l-1.41-1.42l5.5-5.5H2v-2h14.17l-5.5-5.5l1.41-1.42M20 12v10h2V2h-2v10Z"})])],-1),K=[{__name:"index",props:{type:{type:String,default:"button"},i18n:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},leftIcon:{type:Object,default:()=>({icon:"\uFF1C"})},rightIcon:{type:Object,default:()=>({icon:"\uFF1E"})},closeIcon:{type:Object,default:()=>({icon:"x"})},stepPercentage:{type:Number,default:10}},emits:["reloadPage"],setup(n,{expose:E,emit:Q}){const k=n,N=m.useRoute(),y=m.useRouter(),j=(t,o)=>{let c=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector;for(;t&&!c.call(t,o);)t=t.parentElement;return t},v=(t,o)=>{let c=[],l=I=>{I.forEach(h=>{_(h,o)&&c.push(h),h.childNodes&&h.childNodes.length>0&&l(h.childNodes)})};return l(t.childNodes),c},_=(t,o)=>t.classList?t.classList.contains(o):new RegExp("\\s"+o+"\\s").test(" "+t.className+" "),p=t=>{let o=t instanceof Array?[]:{};for(let c in t)o[c]=typeof t[c]=="object"?p(t[c]):t[c];return o},ee=t=>window.btoa(encodeURIComponent(JSON.stringify(t))),te=t=>JSON.parse(decodeURIComponent(window.atob(t))),a=e.ref([]);e.watch(()=>a.value.length,()=>{sessionStorage.setItem("_VUETABSARR_",ee(a.value))}),e.watch(N,()=>{$(N)});const d=e.ref({}),C=e.ref(!1),B=e.ref(!1),x=e.ref(!1),L=e.ref(!1);let w=0,b=0,V=0,M=0,P=0;const r=e.ref(null),f=()=>{i.value=!1;const t=v(r.value,"item");a.value.forEach((o,c)=>{c===0?(o.btnMoveX=0,o.chromeMoveX=0):(o.btnMoveX=a.value[c-1].btnMoveX+t[c].clientWidth+12,o.chromeMoveX=a.value[c-1].chromeMoveX+t[c].clientWidth)}),V=r.value.clientWidth-20,w=0,b=0,t.forEach((o,c)=>{b+=o.clientWidth,w+=o.clientWidth+2,c!==0&&(w+=10)}),S()},S=()=>{C.value=V<(k.type==="button"?w:b),M=(k.type==="button"?w:b)-V,P=M/k.stepPercentage,C.value?(r.value.scrollLeft=a.value.filter(t=>t.path===d.value.path)[0][k.type==="button"?"btnMoveX":"chromeMoveX"],R(),B.value||r.value.addEventListener("wheel",z),B.value=!0):(B.value&&r.value.removeEventListener("wheel",z),B.value=!1)};e.watch(()=>k.type,()=>S());const R=()=>{x.value=r.value.scrollLeft===0,L.value=r.value.scrollLeft===M},g=(t=!0)=>{r.value.scrollLeft=r.value.scrollLeft+(t?P:-P),R()},z=t=>{i.value=!1,t.wheelDelta?t.wheelDelta>0?g(!1):t.wheelDelta<0&&g():t.detail&&(t.wheelDelta<0?g(!1):t.wheelDelta>0&&g())},i=e.ref(!1);e.watch(i,()=>{i.value?document.body.addEventListener("click",D):document.body.removeEventListener("click",D)});const W=e.ref(0),X=e.ref(0),s=e.ref({data:{},index:0}),oe=(t,o)=>{s.value.data=p(t),s.value.index=o,W.value=event.pageX+120>document.body.clientWidth?document.body.clientWidth-120:event.pageX,X.value=event.pageY,i.value=!0},D=()=>{j(event.target,".tabs-pop")===null&&(i.value=!1)},u=t=>{switch(t){case 1:i.value=!1,Q("reloadPage");break;case 2:i.value=!1,A(s.value.data,s.value.index);break;case 3:a.value=[p(s.value.data)],i.value=!1,a.value.findIndex(o=>o.path===d.value.path)===-1&&y.push(s.value.data.path);break;case 4:a.value=p(a.value.slice(s.value.index)),a.value.findIndex(o=>o.path===d.value.path)===-1?(i.value=!1,y.push(s.value.data.path)):e.nextTick(()=>{f()});break;case 5:a.value=p(a.value.slice(0,s.value.index+1)),a.value.findIndex(o=>o.path===d.value.path)===-1?(i.value=!1,y.push(s.value.data.path)):e.nextTick(()=>{f()});break}},$=t=>{const o={label:t.meta.title,supLabel:t.query.tabsSupTit||"",name:t.name,path:t.fullPath,icon:t.meta.icon};a.value.findIndex(c=>k.multiple?c.path===o.path:c.name===o.name)===-1?(a.value.push(o),H(o)):H(o,!1)},A=(t,o)=>{a.value.splice(o,1),e.nextTick(()=>{t.path===d.value.path?y.push(a.value[o===a.value.length?o-1:o].path):f()})},H=(t,o=!0)=>{d.value=p(t),o?e.nextTick(()=>{f()}):S()};return sessionStorage.getItem("_VUETABSARR_")&&(a.value=te(sessionStorage.getItem("_VUETABSARR_"))),$(N),e.onMounted(()=>{f(),window.addEventListener("resize",f)}),e.onBeforeUnmount(()=>{window.removeEventListener("resize",f),document.body.removeEventListener("click",D),sessionStorage.removeItem("_VUETABSARR_"),B.value&&r.value.removeEventListener("wheel",z)}),E({dealSize:f}),(t,o)=>{const c=e.resolveComponent("el-icon");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["vue-tabs-plus",n.type!=="button"?"chrome-tab":""])},[e.unref(C)?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["go-left",e.unref(x)?"is-dis":""]),onClick:o[0]||(o[0]=l=>e.unref(x)?null:g(!1))},[n.leftIcon&&(n.leftIcon.icon||n.leftIcon.type)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[n.leftIcon.type==="custom"?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.leftIcon.icon),e.normalizeProps(e.mergeProps({key:0},n.leftIcon.attrs)),null,16)):n.leftIcon.type==="el"?(e.openBlock(),e.createBlock(c,e.normalizeProps(e.mergeProps({key:1},n.leftIcon.attrs)),{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.leftIcon.icon)))]),_:1},16)):n.leftIcon.type==="iconfont"?(e.openBlock(),e.createElementBlock("i",e.mergeProps({key:2,class:["icon iconfont","icon-"+n.leftIcon.icon]},n.leftIcon.attrs),null,16)):(e.openBlock(),e.createElementBlock("i",e.mergeProps({key:3,class:n.leftIcon.type},n.leftIcon.attrs),e.toDisplayString(n.leftIcon.icon),17))],64)):e.createCommentVNode("",!0)],2)):e.createCommentVNode("",!0),e.createElementVNode("div",{ref_key:"itemBox",ref:r,class:"item-box"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(a),(l,I)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["item",l.path===e.unref(d).path?"active":""]),title:(n.i18n?t.$t(l.label):l.label)+l.supLabel,key:I,onClick:h=>l.path===e.unref(d).path?null:e.unref(y).push(l.path),onContextmenu:e.withModifiers(h=>oe(l,I),["prevent"])},[l.icon&&(l.icon.icon||l.icon.type)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[l.icon.type==="custom"?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(l.icon.icon),e.mergeProps({key:0,class:"menu-icon"},l.icon.attrs),null,16)):l.icon.type==="el"?(e.openBlock(),e.createBlock(c,e.mergeProps({key:1,class:"menu-icon"},l.icon.attrs),{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(l.icon.icon)))]),_:2},1040)):l.icon.type==="iconfont"?(e.openBlock(),e.createElementBlock("i",e.mergeProps({key:2,class:["menu-icon icon iconfont","icon-"+l.icon.icon]},l.icon.attrs),null,16)):(e.openBlock(),e.createElementBlock("i",e.mergeProps({key:3,class:["menu-icon",l.icon.type]},l.icon.attrs),e.toDisplayString(l.icon.icon),17))],64)):e.createCommentVNode("",!0),e.createElementVNode("div",F,e.toDisplayString(n.i18n?t.$t(l.label):l.label)+e.toDisplayString(l.supLabel),1),e.unref(a).length>1?(e.openBlock(),e.createElementBlock("div",{key:1,class:"icon-box",onClick:e.withModifiers(h=>A(l,I),["stop"])},[n.closeIcon&&(n.closeIcon.icon||n.closeIcon.type)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[n.closeIcon.type==="custom"?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.closeIcon.icon),e.normalizeProps(e.mergeProps({key:0},n.closeIcon.attrs)),null,16)):n.closeIcon.type==="el"?(e.openBlock(),e.createBlock(c,e.normalizeProps(e.mergeProps({key:1},n.closeIcon.attrs)),{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.closeIcon.icon)))]),_:1},16)):n.closeIcon.type==="iconfont"?(e.openBlock(),e.createElementBlock("i",e.mergeProps({key:2,class:["icon iconfont","icon-"+n.closeIcon.icon]},n.closeIcon.attrs),null,16)):(e.openBlock(),e.createElementBlock("i",e.mergeProps({key:3,class:n.closeIcon.type},n.closeIcon.attrs),e.toDisplayString(n.closeIcon.icon),17))],64)):e.createCommentVNode("",!0)],8,q)):e.createCommentVNode("",!0)],42,U))),128)),e.unref(i)?(e.openBlock(),e.createElementBlock("div",{key:0,class:"tabs-pop",style:e.normalizeStyle({left:e.unref(W)+"px",top:e.unref(X)+"px"})},[e.createElementVNode("div",{class:e.normalizeClass(["tabs-pop-item",e.unref(s).data.path===e.unref(d).path?"":"dis"]),onClick:o[1]||(o[1]=l=>e.unref(s).data.path===e.unref(d).path?u(1):null)},[O,e.createTextVNode(" \u91CD\u65B0\u52A0\u8F7D ")],2),e.createElementVNode("div",{class:e.normalizeClass(["tabs-pop-item",e.unref(a).length===1?"dis":""]),onClick:o[2]||(o[2]=l=>u(2))},[J,e.createTextVNode(" \u5173\u95ED\u5F53\u524D ")],2),e.createElementVNode("div",{class:e.normalizeClass(["tabs-pop-item",e.unref(a).length===1?"dis":""]),onClick:o[3]||(o[3]=l=>u(3))},[Y,e.createTextVNode(" \u5173\u95ED\u5176\u4ED6 ")],2),e.createElementVNode("div",{class:e.normalizeClass(["tabs-pop-item",e.unref(s).index===0?"dis":""]),onClick:o[4]||(o[4]=l=>u(4))},[Z,e.createTextVNode(" \u5173\u95ED\u5DE6\u4FA7 ")],2),e.createElementVNode("div",{class:e.normalizeClass(["tabs-pop-item",e.unref(s).index===e.unref(a).length-1?"dis":""]),onClick:o[5]||(o[5]=l=>u(5))},[G,e.createTextVNode(" \u5173\u95ED\u53F3\u4FA7 ")],2)],4)):e.createCommentVNode("",!0)],512),e.unref(C)?(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass(["go-right",e.unref(L)?"is-dis":""]),onClick:o[6]||(o[6]=l=>e.unref(L)?null:g())},[n.rightIcon&&(n.rightIcon.icon||n.rightIcon.type)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[n.rightIcon.type==="custom"?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.rightIcon.icon),e.normalizeProps(e.mergeProps({key:0},n.rightIcon.attrs)),null,16)):n.rightIcon.type==="el"?(e.openBlock(),e.createBlock(c,e.normalizeProps(e.mergeProps({key:1},n.rightIcon.attrs)),{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.rightIcon.icon)))]),_:1},16)):n.rightIcon.type==="iconfont"?(e.openBlock(),e.createElementBlock("i",e.mergeProps({key:2,class:["icon iconfont","icon-"+n.rightIcon.icon]},n.rightIcon.attrs),null,16)):(e.openBlock(),e.createElementBlock("i",e.mergeProps({key:3,class:n.rightIcon.type},n.rightIcon.attrs),e.toDisplayString(n.rightIcon.icon),17))],64)):e.createCommentVNode("",!0)],2)):e.createCommentVNode("",!0)],2)}}}],T={install(n){K.forEach(E=>{n.component("vueTabsPlus",E)})}};return typeof window<"u"&&window.Vue&&window.Vue.use(T),T});
